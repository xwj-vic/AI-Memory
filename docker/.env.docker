# ========== Docker 环境配置 ==========
# 复制此文件为 .env 并填入你的配置

# ========== MySQL 密码 ==========
MYSQL_ROOT_PASSWORD=ai_memory_secret

# ========== LLM 配置 (必填) ==========
LLM_PROVIDER=openai
OPENAI_API_KEY=sk-your-key-here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
JUDGE_MODEL=gpt-4o-mini
EXTRACT_TAGS_MODEL=gpt-4o

# ========== Qdrant 配置 ==========
QDRANT_COLLECTION=ai_memory

# ========== STM 短期记忆配置 ==========
STM_EXPIRATION_DAYS=7
STM_WINDOW_SIZE=100
STM_MAX_RETENTION_DAYS=7
STM_BATCH_JUDGE_SIZE=10

# ========== Staging 暂存区配置 ==========
STAGING_MIN_OCCURRENCES=2
STAGING_MIN_WAIT_HOURS=48
STAGING_VALUE_THRESHOLD=0.6
STAGING_CONFIDENCE_HIGH=0.8
STAGING_CONFIDENCE_LOW=0.5

# ========== LTM 长期记忆衰减配置 ==========
LTM_DECAY_HALF_LIFE_DAYS=90
LTM_DECAY_MIN_SCORE=0.3

# ========== 监控系统配置 ==========
METRICS_PERSIST_INTERVAL_MINUTES=1
METRICS_HISTORY_LOAD_HOURS=24
METRICS_MEMORY_RETENTION_HOURS=1
METRICS_RETENTION_DAYS=30

# ========== 告警引擎配置 ==========
ALERT_CHECK_INTERVAL_MINUTES=1
ALERT_QUEUE_BACKLOG_THRESHOLD=100
ALERT_QUEUE_BACKLOG_COOLDOWN_MINUTES=10
ALERT_SUCCESS_RATE_THRESHOLD=60
ALERT_SUCCESS_RATE_COOLDOWN_MINUTES=30
ALERT_CACHE_HIT_RATE_THRESHOLD=20
ALERT_CACHE_HIT_RATE_COOLDOWN_MINUTES=15
ALERT_DECAY_SPIKE_THRESHOLD=1000
ALERT_DECAY_SPIKE_COOLDOWN_MINUTES=60
ALERT_HISTORY_MAX_SIZE=100

# ========== 智能缓存检测配置（优化后，减少误报） ==========
ALERT_CACHE_WINDOW_MINUTES=5
ALERT_CACHE_MIN_SAMPLES=500
ALERT_CACHE_WARN_THRESHOLD=30
ALERT_CACHE_ERROR_THRESHOLD=15
ALERT_CACHE_TREND_PERIODS=3


# ========== 告警通知配置 ==========
# Webhook通知（企业微信/钉钉/Slack等）
ALERT_WEBHOOK_ENABLED=false
ALERT_WEBHOOK_URL=
ALERT_WEBHOOK_TIMEOUT_SECONDS=5

# 邮件通知
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_SMTP_HOST=smtp.example.com
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_USERNAME=
ALERT_EMAIL_PASSWORD=
ALERT_EMAIL_FROM=AI-Memory Alert <alert@example.com>
ALERT_EMAIL_TO=
ALERT_EMAIL_USE_TLS=true

# 通知级别控制
ALERT_NOTIFY_LEVELS=ERROR,WARNING
